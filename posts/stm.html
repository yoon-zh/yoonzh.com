<!-- _layouts/default.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <!-- _includes/head.html -->
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer-when-downgrade">
  <title>yoonzh.com</title>
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body);"></script>
  
</head>
</head>
<body class="">
  <!-- _includes/header.html -->
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-K2M9QVQ44D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-K2M9QVQ44D');
</script>

<header class="site-header">
  <div class="nav-container">
    <div class="logo-group">
      <a href="/" class="logo-image">
        <img src="/images/pepito-square.jpg" alt="Home">
      </a>
      <div class="logo-container">
        <a href="/" class="logo-link">
          <h1 class="logo">ìœ¤å¿—</h1>
        </a>
        <p class="logo-subtitle">[äº‘ ~ ì°Œ]</p>
      </div>
    </div>
    <nav class="nav-links">
      
        <a href="/projects/" class="hover-glow">Projects</a>
      
        <a href="/posts/" class="hover-glow">Posts</a>
      
        <a href="/about/" class="hover-glow">About</a>
      
    </nav>
  </div>
</header>
  
  <main class="page-content">
    <!-- _layouts/post.html -->
<article class="article-detail">
  <!-- _includes/article-content.html -->
<header class="article-header">
  <h1>
    STM Learning Path
    
  </h1>
  
  <div class="tech-tags">
    
      <span class="tech-tag">STM</span>
    
      <span class="tech-tag">C/C++</span>
    
      <span class="tech-tag">ROS2</span>
    
  </div>
  
  <div class="article-meta">
    
      <time datetime="2025-02-24T00:00:00+00:00">
        ðŸ“… 2025/02/24
      </time>
    
  </div>
</header>

<div class="article-content">
  <p><em>Adapted from <sup id="fnref:1"><a href="#fn:1" class="footnote" rel="footnote" role="doc-noteref">1</a></sup>, <sup id="fnref:2"><a href="#fn:2" class="footnote" rel="footnote" role="doc-noteref">2</a></sup></em></p>

<h1 id="robot-development-course-syllabus">Robot Development Course Syllabus</h1>

<p><strong>Target Audience:</strong> Engineering undergrads with basic foundations who want to build a robot.</p>

<p><strong>Tools:</strong> STM32CubeIDE, VSCode, FreeRTOS, ROS2, GitHub, OpenCV.</p>

<p><strong>Robot Platform:</strong> STM32-based dual-C-board robot.</p>

<h2 id="course-structure">Course Structure</h2>
<p>Organized into <strong>20 weeks</strong>, progressing from foundational STM32 concepts to advanced robotic systems. Each week includes a hands-on project reinforcing theory. Weekly projects build into the final course project.</p>

<hr />

<h2 id="week-1-microcontroller--stm32">Week 1: Microcontroller &amp; STM32</h2>
<ul>
  <li>Definition of a microcontroller, types and architecture</li>
  <li>Basics of CPU, memory, GPIO, interrupts, and peripherals</li>
  <li>Difference between popular boards like Arduino, STM, and Pi</li>
  <li>STM32 families, registers, and toolchain</li>
  <li>Using STM32CubeIDE, configuring the board, and generating code</li>
  <li>Basic circuits in STM32 using buttons, diodes, transistors, and motors</li>
  <li>STM32F4 block diagram (clock tree, GPIO, DMA)</li>
</ul>

<h3 id="weekly-project">Weekly Project</h3>
<p>Generate a project in STM32CubeIDE to blink an LED using HAL. Include a button interrupt. Push code to GitHub with a <code class="language-text highlighter-rouge">README.md</code>.</p>

<hr />

<h2 id="week-2-clock--power-management">Week 2: Clock &amp; Power Management</h2>
<ul>
  <li>Configuring clock sources (HSI, HSE, PLL)</li>
  <li>Power modes: Run, Sleep, Stop</li>
  <li>Analyzing the <code class="language-text highlighter-rouge">system_stm32f4xx.c</code> file for clock configuration</li>
</ul>

<h3 id="weekly-project-1">Weekly Project</h3>
<p>Modify the robotâ€™s clock to run at 168MHz using STM32CubeMX. Verify via oscilloscope using the <code class="language-text highlighter-rouge">bsp_delay.c</code> module.</p>

<hr />

<h2 id="week-3-halll-libraries">Week 3: HAL/LL Libraries</h2>
<ul>
  <li>Peripheral initialization, GPIO control, and library structure</li>
  <li>Exploring the <code class="language-text highlighter-rouge">stm32f4xx_hal_gpio.c</code> and <code class="language-text highlighter-rouge">stm32f4xx_ll_gpio.c</code> files in the workspace</li>
</ul>

<h3 id="weekly-project-2">Weekly Project</h3>
<p>Rewrite the LED blinker using LL drivers <code class="language-text highlighter-rouge">stm32f4xx_ll_gpio.c</code>. Compare HAL/LL execution cycles. Analyze HAL overhead with STM32CubeMonitor.</p>

<hr />

<h2 id="week-4-motors--drivers">Week 4: Motors &amp; Drivers</h2>
<ul>
  <li>Motor types: DC, stepper, servo, brushed and brushless motors</li>
  <li>Stall current detection</li>
  <li>Motor transfer functions</li>
  <li>Driver ICs (A4988, TMC2209)</li>
  <li>H-bridges (L298N), PWM duty cycle, ESC control</li>
  <li>Feedback Systems: Encoders (quadrature) vs. potentiometers (for servo angle)</li>
  <li>API Design: Abstraction layers for motor control, version control</li>
</ul>

<h3 id="weekly-project-3">Weekly Project</h3>
<ul>
  <li>Brushed DC Motor: Use <code class="language-text highlighter-rouge">stm32f4xx_ll_tim.c</code> to generate PWM for an H-bridge. Vary speed via manual input.</li>
  <li>Servo Motor: Calibrate PWM pulses for 0Â°â€“180Â° sweep using <code class="language-text highlighter-rouge">LL_TIM</code>.</li>
  <li>A unified API to control both motor types (e.g., <code class="language-text highlighter-rouge">motor_set_angle()</code>, <code class="language-text highlighter-rouge">motor_set_rpm()</code>).</li>
</ul>

<hr />

<h2 id="week-5-closed-loop-motor-control">Week 5: Closed-Loop Motor Control</h2>
<ul>
  <li>Open vs. Closed Loop: Why feedback matters (load disturbances, voltage sag)</li>
  <li>Encoder basics, counts per revolution (CPR), calculating RPM/position</li>
  <li>Bang-Bang Control, simple on/off feedback</li>
  <li>Dead reckoning, basic open loop motion planning</li>
</ul>

<h3 id="weekly-project-4">Weekly Project</h3>
<ul>
  <li>Brushed DC Motor: Use encoder feedback to rotate the wheel exactly 5 times, even if manually resisted.</li>
  <li>Servo Motor: Use a potentiometer (as position feedback) to hold a target angle against external forces.</li>
  <li>Characterize motor performance without PID (e.g., overshoot, settling time).</li>
</ul>

<hr />

<h2 id="week-6-pid-implementation--tuning">Week 6: PID Implementation &amp; Tuning</h2>
<ul>
  <li>PID Intuition: Proportional (stiffness), Integral (eliminate steady-state error), Derivative (damping)</li>
  <li>Ziegler-Nichols, relay feeedback, MATLAB PID Tuner</li>
  <li>Manual tweaking for actuator limits (max PWM %)</li>
  <li>Anti-Windup, integral saturation</li>
</ul>

<h3 id="weekly-project-5">Weekly Project</h3>
<ul>
  <li>Stabilize wheel RPM under variable load (e.g., add weights). Plot PWM% vs. RPM with/without PID in STM32CubeMonitor.</li>
  <li>Implement position control for the turret servo. Track a moving target (e.g., joystick-controlled angle).</li>
  <li>Report the differences of PID performance to Week 5â€™s bang-bang approach.</li>
</ul>

<hr />

<h2 id="week-7-adaptive-control--mpc-primer">Week 7: Adaptive Control &amp; MPC Primer</h2>
<ul>
  <li>Adaptive PID, gain scheduling based on operating conditions</li>
  <li>MPC Concepts, predict future states, handling constraints, multi-input systems</li>
  <li>Optimize control inputs (PWM) to minimize tracking error</li>
  <li>MPC`s computational limits on MCUs</li>
</ul>

<h3 id="weekly-project-6">Weekly Project</h3>
<ul>
  <li>Simulation (MATLAB/Python): Use a pre-built DC motor model to compare PID vs. MPC for trajectory tracking.</li>
  <li>STM32 Implementation: Port a simplified MPC (e.g., 3-step horizon) for turret positioning. Use CMSIS-DSP for matrix math.</li>
  <li>Graph the MPCâ€™s reduced overshoot vs. PID during aggressive maneuvers.</li>
</ul>

<hr />

<h2 id="week-8-multi-protocol-sensor-hub">Week 8: Multi-Protocol Sensor Hub</h2>
<ul>
  <li>UART, SPI, I2C characteristics</li>
  <li>Basic wired communication for sensor/motor interfacing</li>
  <li>CRC checks, packet framing (COBS, SLIP), DMA buffering</li>
  <li>Error handling for communication protocols (CRC checks, retry logic)</li>
</ul>

<h3 id="weekly-project-7">Weekly Project</h3>
<p>Interface BMP280 (I2C), ADXL345 (SPI), and UART GPS. Write a custom driver to fuse data into a single struct, add CRC-16, and stream via UART at 1Hz/10Hz (configurable). Simulate noise by shorting SDA/SCK lines; implement retry logic.</p>

<hr />

<h2 id="week-9-can-bus--data-serialization">Week 9: CAN Bus &amp; Data Serialization</h2>
<ul>
  <li>CAN protocol and message framing</li>
  <li>Data packets in JSON/Protobuf</li>
  <li>CAN error handling (retries, bus-off recovery)</li>
</ul>

<h3 id="weekly-project-8">Weekly Project</h3>
<p>Transmit fused sensor data from Week 8 as Protobuf packets over CAN. Add priority-based message queuing (IMU data &gt; GPS).</p>

<hr />

<h2 id="week-10-power-management">Week 10: Power Management</h2>
<ul>
  <li>Battery monitoring and distribution</li>
  <li>Battery sag, supercapacitor charge/discharge curves</li>
  <li>Safety and smart power distribution, safe shutdown sequencing</li>
</ul>

<h3 id="weekly-project-9">Weekly Project</h3>
<ul>
  <li>Monitor battery voltage/current via ADC. Trigger low-power mode at 3.6V, switch to supercapacitor at 3.3V.</li>
  <li>Simulate a fault (sudden 2A spike) and log recovery steps.</li>
</ul>

<hr />

<h2 id="week-11-debugging">Week 11: Debugging</h2>
<ul>
  <li>Oscilloscopes, logic analyzers, and multimeters</li>
  <li>Signal inspection</li>
  <li>Unit tests, simulation, and frameworks (Google Test, Ceedling)</li>
  <li>Hardware-in-the-loop (HIL) with Renode</li>
  <li>GitHub Actions CI/CD pipelines</li>
  <li>Concurrency pitfalls and race condition debugging</li>
  <li>MISRA-C compliance checks</li>
</ul>

<h3 id="weekly-project-10">Weekly Project</h3>
<ul>
  <li>Capture PWM signals from <code class="language-text highlighter-rouge">bsp_servo_pwm.c</code> using a scope. Diagnose signal integrity issues.</li>
  <li>Write a unit test for the PID controller in <code class="language-text highlighter-rouge">pid.c</code> and motor drivers. Validate with HIL testing. Set up CI to run tests on push.</li>
</ul>

<hr />

<h2 id="week-12-remote-connection">Week 12: Remote Connection</h2>
<ul>
  <li>Wi-Fi/Bluetooth, network protocols (TCP/UDP), ethernet</li>
  <li>Latency management</li>
  <li>Joystick input parsing (HID/ADC)</li>
  <li>ROS2 introduction, setting up <code class="language-text highlighter-rouge">rosbridge_suite</code></li>
</ul>

<h3 id="weekly-project-11">Weekly Project</h3>
<p>Build a simple web dashboard displaying data from ROS2 topics to control and monitor your robot.</p>

<hr />

<h2 id="week-13-robot-kinematics">Week 13: Robot Kinematics</h2>
<ul>
  <li>Differential drive kinematics (odometry, wheel slip)</li>
  <li>Chassis positioning and movement</li>
  <li>inverse kinematics for turret/gimbal movement</li>
</ul>

<h3 id="weekly-project-12">Weekly Project</h3>
<p>Program the chassis and gimbal to track separate movement inputs using <code class="language-text highlighter-rouge">chassis_task.c</code> and <code class="language-text highlighter-rouge">gimbal_task.c</code>.</p>

<hr />

<h2 id="week-14-sensor-fusion">Week 14: Sensor Fusion</h2>
<ul>
  <li>Kalman filters, complementary filters for noise reduction</li>
  <li>IMU noise modeling, Allan variance, quantizing IMU noise with standard deviation</li>
  <li>Fusion with encoder/vision data, encoder CPR validation</li>
  <li>Sensor calibration</li>
</ul>

<h3 id="weekly-project-13">Weekly Project</h3>
<p>Fuse BMI088 IMU data with encoder readings for chassis odometry using <code class="language-text highlighter-rouge">kalman_filter.c</code>.</p>

<hr />

<h2 id="week-15-rtos-integration">Week 15: RTOS Integration</h2>
<ul>
  <li>Difference between FreeRTOS, Zephyr, and ROS2</li>
  <li>Task scheduling, semaphores, and real-time constraints</li>
  <li>Implementing RTOS on a robot system with FreeRTOS</li>
</ul>

<h3 id="weekly-project-14">Weekly Project</h3>
<p>Create FreeRTOS tasks for motor control (high priority) and sensor polling (low priority). Bridge tasks to ROS2 using micro-ROS (share memory pools).</p>

<hr />

<h2 id="week-16-vision-system-integration">Week 16: Vision System Integration</h2>
<ul>
  <li>OpenCV basics and camera calibration</li>
  <li>ML-based object detection with TensorFlow</li>
  <li>ROS2 frameworks for modular sensor pipelines</li>
</ul>

<h3 id="weekly-project-15">Weekly Project</h3>
<p>Detect a colored object with <code class="language-text highlighter-rouge">vision.c</code> and publish coordinates over CAN.</p>

<hr />

<h2 id="week-17-middleware-integration">Week 17: Middleware Integration</h2>
<ul>
  <li>ROS2-FreeRTOS bridges (micro-ROS).</li>
  <li>Message brokers (MQTT), ROS2 nodes, and DDS</li>
  <li>Sensor integration through ROS2 and RTOS</li>
  <li>QoS settings for real-time control.</li>
</ul>

<h3 id="weekly-project-16">Weekly Project</h3>
<p>Publish motor speeds to ROS2 and subscribe to joystick topics.</p>

<hr />

<h2 id="week-18-automated-aiming--trajectories">Week 18: Automated Aiming &amp; Trajectories</h2>
<ul>
  <li>Ballistics modeling for angled shooting (gravity/wind compensation)</li>
  <li>Code implementation on automatic target detection and firing calculations</li>
  <li>Dynamic system coordination (e.g., turret stabilization while moving)</li>
</ul>

<h3 id="weekly-project-17">Weekly Project</h3>
<p>Implement projectile trajectory logic in <code class="language-text highlighter-rouge">calculate.c</code> for angled shots.</p>

<hr />

<h2 id="week-19-error-recovery-states">Week 19: Error Recovery States</h2>
<ul>
  <li>Watchdog timers (IWDG, WWDG) and safe modes</li>
  <li>Fault injection testing</li>
  <li>Graceful degradation (e.g., disable motors, enable brakes)</li>
  <li>Graceful error recovery with ROS2 lifecycle nodes</li>
  <li>Firmware updates and self-diagnostics</li>
</ul>

<h3 id="weekly-project-18">Weekly Project</h3>
<p>Design and test a recovery routine for motor faults in <code class="language-text highlighter-rouge">detect_task.c</code>.</p>

<hr />

<h2 id="week-20-system-integration--optimization">Week 20: System Integration &amp; Optimization</h2>
<ul>
  <li>Code profiling, memory management, and power/performance tradeoffs</li>
</ul>

<h3 id="final-project">Final Project</h3>
<p>Integrate vision, motor control, and trajectory systems into your robot. Navigate through the gym field, detect and hit targets with 80% accuracy.</p>

<hr />

<h2 id="credits">Credits</h2>

<!--Written by Jorge Porras (2025)-->

<p>draft
###################</p>
<h2 id="week-13-ros2-essentials">Week 13: ROS2 Essentials</h2>
<ul>
  <li>ROS2 nodes, topics, and DDS/Quality of Service (QoS)</li>
  <li>Micro-ROS for constrained devices</li>
</ul>

<h3 id="weekly-project-19">Weekly Project</h3>
<p>Port Week 8â€™s sensor hub to a ROS2 node. Publish data to <code class="language-text highlighter-rouge">/sensors/imu</code>.</p>

<hr />

<h2 id="week-14-rtos--ros2-integration">Week 14: RTOS + ROS2 Integration</h2>
<ul>
  <li>Difference between FreeRTOS, Zephyr, and ROS2</li>
  <li>Task scheduling, semaphores, and real-time constraints</li>
  <li>Implementing RTOS on a robot system with FreeRTOS</li>
  <li>ROS2-FreeRTOS bridges (micro-ROS)</li>
  <li>Message brokers (MQTT), ROS2 nodes, and DDS</li>
  <li>Sensor integration through ROS2 and RTOS</li>
</ul>

<h3 id="weekly-project-20">Weekly Project</h3>
<ul>
  <li>Create FreeRTOS tasks for motor control (high priority) and sensor polling (low priority).</li>
  <li>Bridge tasks to ROS2 using micro-ROS (share memory pools).</li>
</ul>

<p>##################</p>
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1">
      <p>Deepseek.Â <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>ChatGPT.Â <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

</div>
</article>
  </main>

  <!-- _includes/footer.html -->
<footer class="site-footer">
  <div class="footer-content">
    <div class="social-links">
      <a href="https://github.com/yoon-zh" class="hover-glow" aria-label="GitHub">
        <i class="fab fa-github"></i>
      </a>
      <a href="mailto:yoon_zh@outlook.com" class="hover-glow" aria-label="Email">
        <i class="fas fa-envelope"></i>
      </a>
      <a href="https://www.linkedin.com/in/jorge-porras-1a7393282/" class="hover-glow" aria-label="LinkedIn">
        <i class="fab fa-linkedin"></i>
      </a>
      <a href="https://t.me/yo_o_n" class="hover-glow" aria-label="Telegram">
        <i class="fab fa-telegram-plane"></i>
      </a>
    </div>
    <div class="footer-bottom">
      <p>Â© 2025 ìœ¤å¿—. All rights reserved.</p>
    </div>
  </div>
</footer>
<script src="/scripts/main.js"></script>
<script src="/scripts/codeblocks.js"></script>
<script src="/scripts/axeptio.js"></script>
</body>
</html>
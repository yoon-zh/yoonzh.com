<!-- _layouts/default.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <!-- _includes/head.html -->
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer-when-downgrade">
  <title>yoonzh.com</title>
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body);"></script>
  
</head>
</head>
<body class="">
  <!-- _includes/header.html -->
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-K2M9QVQ44D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-K2M9QVQ44D');
</script>

<header class="site-header">
  <div class="nav-container">
    <div class="logo-container">
      <a href="/" class="logo-link">
        <h1 class="logo">윤志</h1>
      </a>
      <p class="logo-subtitle">[云 ~ 찌]</p>
    </div>
    <nav class="nav-links">
      
        <a href="/projects/" class="hover-glow">Projects</a>
      
        <a href="/posts/" class="hover-glow">Posts</a>
      
        <a href="/about/" class="hover-glow">About</a>
      
    </nav>
  </div>
</header>
  
  <main class="page-content">
    <!-- _layouts/post.html -->
<article class="article-detail">
  <!-- _includes/article-content.html -->
<header class="article-header">
  <h1>
    stm week 1
    
  </h1>
  
  <div class="tech-tags">
    
      <span class="tech-tag">C/C++</span>
    
  </div>
  
  <div class="article-meta">
    
  </div>
</header>

<div class="article-content">
  <p>date: 2025-02-28</p>

<p><em>Adapted from <sup id="fnref:1"><a href="#fn:1" class="footnote" rel="footnote" role="doc-noteref">1</a></sup></em></p>

<h1 id="week-1-from-arduino-to-stm32">Week 1: From Arduino to STM32</h1>

<h2 id="concepts">Concepts</h2>
<h3 id="1-microcontroller-definition-and-types">1. Microcontroller Definition and Types</h3>
<p><strong>Definition</strong>: A microcontroller (MCU) is a compact integrated circuit designed to execute specific tasks in embedded systems. It combines a CPU, memory, and programmable I/O peripherals.</p>

<p><strong>Types</strong>:</p>
<ul>
  <li><strong>8-bit</strong> (e.g., ATmega328 in Arduino Uno): Simple, low power.</li>
  <li><strong>32-bit</strong> (e.g., STM32F4): Faster, complex operations.</li>
  <li><strong>Application-Specific</strong> (e.g., ESP32 for Wi-Fi).</li>
</ul>

<h3 id="2-architecture-components">2. Architecture Components</h3>
<p><strong>CPU</strong>: Executes instructions. STM32 uses ARM Cortex-M cores.</p>

<p><strong>Memory</strong>:</p>
<ul>
  <li><strong>Flash</strong>: Stores program code (e.g., 1MB in STM32F407).</li>
  <li><strong>RAM</strong>: Temporary data storage (e.g., 192KB in STM32F407).</li>
</ul>

<p><strong>GPIO</strong>: Pins for digital input/output (e.g., PA0, PC13).<br />
<strong>Interrupts</strong>: Hardware-triggered events (e.g., button press).<br />
<strong>Peripherals</strong>: Timers, UART, SPI, I2C, ADC.</p>

<h3 id="3-boards-comparison">3. Boards Comparison</h3>

<table>
  <thead>
    <tr>
      <th><strong>Feature</strong></th>
      <th><strong>Arduino</strong></th>
      <th><strong>STM32</strong></th>
      <th><strong>Raspberry Pi</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Core</strong></td>
      <td>8/16-bit AVR</td>
      <td>32-bit ARM Cortex</td>
      <td>64-bit ARM Linux</td>
    </tr>
    <tr>
      <td><strong>Speed</strong></td>
      <td>16 MHz</td>
      <td>Up to 216 MHz</td>
      <td>1.5 GHz+</td>
    </tr>
    <tr>
      <td><strong>Use Case</strong></td>
      <td>Prototyping</td>
      <td>Real-time systems</td>
      <td>General computing</td>
    </tr>
  </tbody>
</table>

<h3 id="stm32-vs-arduino">STM32 vs. Arduino</h3>
<ul>
  <li><strong>Architecture</strong>: Arduino uses AVR/ARM microcontrollers with simplified abstractions. STM32 uses ARM Cortex-M cores with higher clock speeds (e.g., 72MHz vs. 16MHz on Arduino Uno).</li>
  <li><strong>Performance</strong>: STM32 has more memory (e.g., 64KB Flash vs. 32KB) and peripherals (timers, ADCs, communication interfaces).</li>
  <li><strong>Toolchain</strong>: Arduino uses Arduino IDE; STM32 requires STM32CubeIDE/Keil for code generation, compilation, and debugging.</li>
</ul>

<h3 id="4-code-comparison">4. Code Comparison</h3>

<p>Arduino (Blink LED):</p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>STM32 (HAL Library in STM32CubeIDE):</p>
<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// In main.c</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">HAL_Init</span><span class="p">();</span>
  <span class="n">SystemClock_Config</span><span class="p">();</span>
  <span class="n">MX_GPIO_Init</span><span class="p">();</span> <span class="c1">// Configures LED pin as output</span>
  
  <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">HAL_GPIO_TogglePin</span><span class="p">(</span><span class="n">GPIOA</span><span class="p">,</span> <span class="n">GPIO_PIN_5</span><span class="p">);</span>
    <span class="n">HAL_Delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span> <span class="c1">// 2Hz blink</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="5-workspace-navigation">5. Workspace Navigation</h3>
<ul>
  <li><strong>MDK-ARM Directory</strong>: Contains Keil project files.
    <ul>
      <li><code class="language-text highlighter-rouge">standard_board_c</code>: Hardware Abstraction Layer (HAL) drivers.</li>
      <li><code class="language-text highlighter-rouge">chassis_task.c</code>: RTOS tasks for motor control.</li>
    </ul>
  </li>
</ul>

<h3 id="6-toolchain-setup">6. Toolchain Setup</h3>
<ol>
  <li><strong>STM32CubeIDE</strong>: Install from <a href="https://www.st.com">ST Website</a>.</li>
  <li><strong>VSCode</strong>: Install extensions for C/C++ and Git.</li>
  <li><strong>Keil uVision</strong>: Configure device packs for STM32.</li>
</ol>

<h2 id="project-stm32-blinking-led">Project: STM32 blinking LED</h2>
<p><strong>Objective</strong>: Install STM32CubeIDE and program the STM32 to blink an LED.</p>

<h3 id="instructions">Instructions</h3>
<ol>
  <li><strong>Install Software</strong>:
    <ul>
      <li>Download <a href="https://www.st.com/en/development-tools/stm32cubeide.html">STM32CubeIDE</a>.</li>
      <li>Install STM32CubeMX (bundled with IDE).</li>
    </ul>
  </li>
  <li><strong>Create Project</strong>:
    <ul>
      <li>Launch STM32CubeIDE, click on <em>Start new STM32 project</em>.</li>
      <li>Select your STM32 model (e.g., STM32F103C8Tx).</li>
    </ul>
  </li>
  <li><strong>Configure GPIO</strong>:
    <ul>
      <li>In <em>Pinout &amp; Configuration</em>, select a GPIO pin (e.g., PA5) → Set to <em>GPIO_Output</em>.</li>
    </ul>
  </li>
  <li><strong>Generate Code</strong>:
    <ul>
      <li>Click <em>Generate Code</em> and open <code class="language-text highlighter-rouge">main.c</code> in the IDE.</li>
    </ul>
  </li>
  <li><strong>Write Code</strong>:
    <ul>
      <li>Replace the main loop with the example above.
```c<br />
#include “stm32f4xx_hal.h”</li>
    </ul>
  </li>
</ol>

<p>int main(void) {<br />
  HAL_Init();<br />
  __HAL_RCC_GPIOA_CLK_ENABLE();  // Enable GPIOA clock</p>

<p>GPIO_InitTypeDef led = {<br />
    .Pin = GPIO_PIN_5,           // PA5 (onboard LED)<br />
    .Mode = GPIO_MODE_OUTPUT_PP, // Push-pull output<br />
    .Pull = GPIO_NOPULL,<br />
    .Speed = GPIO_SPEED_FREQ_LOW<br />
  };<br />
  HAL_GPIO_Init(GPIOA, &amp;led);</p>

<p>while (1) {<br />
    HAL_GPIO_TogglePin(GPIOA, GPIO_PIN_5);<br />
    HAL_Delay(500);  // 500ms delay<br />
  }<br />
}</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
6. **Build and Flash**:
   - Connect the STM32 via ST-Link.
   - Click *Run* to flash the program.


7. **GitHub Submission**:
```bash
git clone https://github.com/your-repo.git
git add .
git commit -m "Implemented 2Hz LED blink using STM32 HAL"
git push
</code></pre></div></div>

<h2 id="questions">Questions</h2>

<ol>
  <li>What is the role of Flash memory in an MCU?</li>
  <li>What is the primary difference in architecture between Arduino Uno and STM32?</li>
  <li>Which HAL function is used to introduce a delay in STM32?</li>
  <li>What directory contains RTOS task definitions in the provided workspace?</li>
  <li>List two advantages of STM32 over Arduino.</li>
  <li>What is the purpose of <code class="language-text highlighter-rouge">MX_GPIO_Init()</code> in STM32 code?</li>
</ol>

<h2 id="dictionary">Dictionary</h2>

<ul>
  <li><strong>HAL (Hardware Abstraction Layer)</strong>: Library to abstract hardware operations for peripheral control (e.g., <code class="language-text highlighter-rouge">HAL_GPIO_TogglePin()</code>).</li>
  <li><strong>GPIO</strong>: General-Purpose Input/Output – configurable digital pins.</li>
  <li><strong>RTOS (Real-Time Operating System)</strong>: Manages multiple tasks with timing guarantees (e.g., FreeRTOS).</li>
  <li><strong>Toolchain</strong>: Set of tools for code development (STM32CubeIDE, compiler, debugger).</li>
  <li><strong>Interrupt</strong>: Signal that pauses the CPU to handle an event.</li>
  <li><strong>Clock Speed</strong>: Frequency at which the CPU executes instructions (e.g., 168MHz).</li>
</ul>

<h2 id="resources">Resources</h2>

<ol>
  <li><a href="https://www.st.com">STM32CubeIDE Installation Guide</a></li>
  <li><a href="https://www.youtube.com/watch?v=Hffw-m9fuxc">STM32CubeIDE Beginner Guide</a></li>
  <li><a href="https://www.reddit.com/r/stm32f4/comments/95406y/comment/e5ej2av/?utm_source=share&amp;utm_medium=web3x&amp;utm_name=web3xcss&amp;utm_term=1&amp;utm_content=share_button">STM32 HAL Documentation Guide</a></li>
  <li><a href="https://git-scm.com/docs/gittutorial">Git Tutorial</a></li>
  <li><a href="https://developer.arm.com/documentation/ddi0439/b/Introduction">ARM Cortex-M4 Manual</a></li>
  <li><a href="https://www.freertos.org/Documentation/01-FreeRTOS-quick-start/01-Beginners-guide/01-RTOS-fundamentals">FreeRTOS Beginner Guide</a></li>
</ol>

<h2 id="debugging">Debugging</h2>

<p><strong>LED Not Blinking</strong>:</p>
<ul>
  <li>Verify GPIO configuration in <code class="language-text highlighter-rouge">MX_GPIO_Init()</code>.</li>
  <li>Check if the correct pin (e.g., PA5) is toggled.</li>
  <li>Verify <code class="language-text highlighter-rouge">HAL_Delay</code> uses a configured timer (SysTick by default).</li>
  <li>Check <code class="language-text highlighter-rouge">SystemClock_Config()</code> in <code class="language-text highlighter-rouge">main.c</code> for correct clock source.</li>
</ul>

<p><strong>Compilation Errors</strong>:</p>
<ul>
  <li>Ensure the board is in programming mode (BOOT0 pin high).</li>
  <li>Ensure HAL drivers are included in the project.</li>
</ul>

<p><strong>ST-Link Connection Failed</strong>:</p>
<ul>
  <li>Reinstall drivers or try a different USB port.</li>
</ul>

<p><strong>Flashing Failed</strong>:</p>
<ul>
  <li>Reconnect ST-Link and restart the IDE.</li>
</ul>

<h2 id="answers-to-questions">Answers to Questions</h2>

<ol>
  <li>Flash stores the compiled program code and read-only data.</li>
  <li>STM32 uses ARM Cortex-M cores with higher clock speeds and more peripherals.</li>
  <li><code class="language-text highlighter-rouge">HAL_Delay()</code></li>
  <li><code class="language-text highlighter-rouge">chassis_task.c</code></li>
  <li>Higher performance, more memory, advanced peripherals.</li>
  <li>Initializes GPIO pins based on CubeMX configuration.</li>
</ol>

<hr />

<h2 id="walkthrough">Walkthrough</h2>
<h3 id="step-by-step-guide">Step-by-Step Guide</h3>
<ol>
  <li><strong>Installation</strong>:
    <ul>
      <li>If drivers fail, install <a href="https://www.st.com/en/development-tools/stsw-link009.html">ST-Link drivers</a>.</li>
    </ul>
  </li>
  <li><strong>Pin Configuration</strong>:
    <ul>
      <li>In CubeMX, navigate to <em>System Core</em> → <em>GPIO</em> → Select PA5 → Set mode to <em>Output Push Pull</em>.</li>
    </ul>
  </li>
  <li><strong>Clock Configuration</strong>:
    <ul>
      <li>Ensure the HSE (external oscillator) is enabled for accurate timing.</li>
    </ul>
  </li>
  <li><strong>Code Generation</strong>:
    <ul>
      <li>After generating code, locate <code class="language-text highlighter-rouge">main.c</code> → Add the LED toggle logic inside the <code class="language-text highlighter-rouge">while(1)</code> loop.</li>
    </ul>
  </li>
  <li><strong>Debugging</strong>:
    <ul>
      <li>If the LED doesn’t blink:
        <ul>
          <li>Check connections with a multimeter.</li>
          <li>Verify the pin in <code class="language-text highlighter-rouge">GPIO_InitTypeDef</code> matches the hardware.</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<hr />

<h2 id="credits">Credits</h2>

<!--Written by Jorge Porras (2025)-->
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1">
      <p>Deepseek. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

</div>
</article>
  </main>

  <!-- _includes/footer.html -->
<footer class="site-footer">
  <div class="footer-content">
    <div class="social-links">
      <a href="https://github.com/yoon-zh" class="hover-glow" aria-label="GitHub">
        <i class="fab fa-github"></i>
      </a>
      <a href="mailto:yoon_zh@outlook.com" class="hover-glow" aria-label="Email">
        <i class="fas fa-envelope"></i>
      </a>
      <a href="https://www.linkedin.com/in/jorge-porras-1a7393282/" class="hover-glow" aria-label="LinkedIn">
        <i class="fab fa-linkedin"></i>
      </a>
      <a href="https://t.me/yo_o_n" class="hover-glow" aria-label="Telegram">
        <i class="fab fa-telegram-plane"></i>
      </a>
    </div>
    <div class="footer-bottom">
      <p>© 2025 윤志. All rights reserved.</p>
    </div>
  </div>
</footer>
<script src="/scripts/main.js"></script>
<script src="/scripts/codeblocks.js"></script>
<script src="/scripts/axeptio.js"></script>
</body>
</html>
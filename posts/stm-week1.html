<!-- _layouts/default.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <!-- _includes/head.html -->
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer-when-downgrade">
  <title>yoonzh.com</title>
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body);"></script>
  
</head>
</head>
<body class="">
  <!-- _includes/header.html -->
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-K2M9QVQ44D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-K2M9QVQ44D');
</script>

<header class="site-header">
  <div class="nav-container">
    <div class="logo-container">
      <a href="/" class="logo-link">
        <h1 class="logo">ìœ¤å¿—</h1>
      </a>
      <p class="logo-subtitle">[äº‘ ~ ì°Œ]</p>
    </div>
    <nav class="nav-links">
      
        <a href="/projects/" class="hover-glow">Projects</a>
      
        <a href="/posts/" class="hover-glow">Posts</a>
      
        <a href="/about/" class="hover-glow">About</a>
      
    </nav>
  </div>
</header>
  
  <main class="page-content">
    <!-- _layouts/post.html -->
<article class="article-detail">
  <!-- _includes/article-content.html -->
<header class="article-header">
  <h1>
    stm week 1
    
  </h1>
  
  <div class="tech-tags">
    
      <span class="tech-tag">C/C++</span>
    
  </div>
  
  <div class="article-meta">
    
      <time datetime="2025-03-02T00:00:00+00:00">
        ðŸ“… 2025/03/02
      </time>
    
  </div>
</header>

<div class="article-content">
  <p><em>Adapted from <sup id="fnref:1"><a href="#fn:1" class="footnote" rel="footnote" role="doc-noteref">1</a></sup></em></p>

<h1 id="week-1-from-arduino-to-stm32">Week 1: From Arduino to STM32</h1>

<h2 id="concepts">Concepts</h2>
<h3 id="1-microcontroller-definition-and-types">1. Microcontroller Definition and Types</h3>
<p><strong>Definition</strong>: A microcontroller (MCU) is a compact integrated circuit designed to execute specific tasks in embedded systems. It combines a CPU, memory, and programmable I/O peripherals.</p>

<p><strong>Types</strong>:</p>
<ul>
  <li><strong>8-bit</strong> (e.g., ATmega328 in Arduino Uno): Simple, low power.</li>
  <li><strong>32-bit</strong> (e.g., STM32F4): Faster, complex operations.</li>
  <li><strong>Application-Specific</strong> (e.g., ESP32 for Wi-Fi).</li>
</ul>

<h3 id="2-architecture-components">2. Architecture Components</h3>
<p><strong>CPU</strong>: Executes instructions. STM32 uses ARM Cortex-M cores.</p>

<p><strong>Memory</strong>:</p>
<ul>
  <li><strong>Flash</strong>: Stores program code (e.g., 1MB in STM32F407).</li>
  <li><strong>RAM</strong>: Temporary data storage (e.g., 192KB in STM32F407).</li>
</ul>

<p><strong>GPIO</strong>: Pins for digital input/output (e.g., PA0, PC13).<br />
<strong>Interrupts</strong>: Hardware-triggered events (e.g., button press).<br />
<strong>Peripherals</strong>: Timers, UART, SPI, I2C, ADC.</p>

<h3 id="3-boards-comparison">3. Boards Comparison</h3>

<table>
  <thead>
    <tr>
      <th><strong>Feature</strong></th>
      <th><strong>Arduino</strong></th>
      <th><strong>STM32</strong></th>
      <th><strong>Raspberry Pi</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Core</strong></td>
      <td>8/16-bit AVR</td>
      <td>32-bit ARM Cortex</td>
      <td>64-bit ARM Linux</td>
    </tr>
    <tr>
      <td><strong>Speed</strong></td>
      <td>16 MHz</td>
      <td>Up to 216 MHz</td>
      <td>1.5 GHz+</td>
    </tr>
    <tr>
      <td><strong>Use Case</strong></td>
      <td>Prototyping</td>
      <td>Real-time systems</td>
      <td>General computing</td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="understanding-stm32">Understanding STM32</h2>

<h3 id="1-stm32-families">1. STM32 Families</h3>
<p><strong>Families</strong>: STM32F0 (entry-level), STM32F4 (high-performance), STM32H7 (ultra-high performance). Differences lie in clock speed (up to 550MHz for H7), peripherals, and power efficiency.<br />
<strong>Registers</strong>: Low-level memory addresses controlling peripherals. For example, <code class="language-text highlighter-rouge">GPIOA-&gt;ODR</code> directly writes to GPIO Port Aâ€™s output data register.<br />
<strong>Toolchain</strong>:</p>
<ul>
  <li><strong>STM32CubeIDE</strong>: Integrated development environment with code generator.</li>
  <li><strong>HAL/LL Libraries</strong>: Hardware Abstraction Layer (HAL) simplifies peripheral control; Low-Layer (LL) offers register-level access</li>
  <li><strong>OpenOCD</strong>: On-chip debugger for flashing code.</li>
</ul>

<h3 id="2-stm32cubeide-workflow">2. STM32CubeIDE Workflow</h3>
<p><strong>Project Creation</strong>: Select MCU model (e.g., STM32F103C8T6), configure pins, generate code.<br />
<strong>Clock Configuration</strong>: Use the graphical clock tree to set HSI/HSE and PLL multipliers.<br />
<strong>GPIO Modes</strong>: Output push-pull, open-drain; input with pull-up/down resistors.</p>

<h3 id="3-basic-circuits">3. Basic Circuits</h3>
<p><strong>LED Circuit</strong>: Connect LED to GPIO pin with a current-limiting resistor (220Î©). Ensure ground is shared with the STM32.<br />
<strong>Button Input</strong>: Use a pull-down resistor to avoid floating pins.</p>

<h3 id="4-stm32f4-block-diagram">4. STM32F4 Block Diagram</h3>
<p><strong>Clock Tree</strong>: Multiple sources (HSI, HSE) feed into PLL for core/peripheral clocks.<br />
<strong>DMA</strong>: Direct Memory Access for peripheral-to-memory transfers without CPU involvement.</p>

<h3 id="5-stm32-vs-arduino">5. STM32 vs. Arduino</h3>
<p><strong>Architecture</strong>: Arduino uses AVR/ARM microcontrollers with simplified abstractions. STM32 uses ARM Cortex-M cores with higher clock speeds (e.g., 72MHz vs. 16MHz on Arduino Uno).</p>

<p><strong>Performance</strong>: STM32 has more memory (e.g., 64KB Flash vs. 32KB) and peripherals (timers, ADCs, communication interfaces).</p>

<p><strong>Toolchain</strong>: Arduino uses Arduino IDE; STM32 requires STM32CubeIDE/Keil for code generation, compilation, and debugging.</p>

<h3 id="6-code-comparison">6. Code Comparison</h3>

<p>Arduino (Blink LED):</p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>STM32 (HAL Library in STM32CubeIDE):</p>
<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// In main.c</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">HAL_Init</span><span class="p">();</span>
  <span class="n">SystemClock_Config</span><span class="p">();</span>
  <span class="n">MX_GPIO_Init</span><span class="p">();</span> <span class="c1">// Configures LED pin as output</span>
  
  <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">HAL_GPIO_TogglePin</span><span class="p">(</span><span class="n">GPIOA</span><span class="p">,</span> <span class="n">GPIO_PIN_5</span><span class="p">);</span>
    <span class="n">HAL_Delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span> <span class="c1">// 2Hz blink</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="toolchain-setup">Toolchain Setup</h2>
<ol>
  <li><strong>STM32CubeIDE/STM32CubeMX</strong>: Install from <a href="https://www.st.com/en/development-tools/stm32-software-development-tools.html">ST Website</a>.</li>
  <li><strong>VSCode</strong>: Install extensions for C/C++.</li>
  <li><strong>Keil uVision</strong>: Configure device packs for STM32.</li>
  <li><strong>Git</strong>: Create an account on <a href="https://github.com">GitHub</a> and install <a href="https://git-scm.com/downloads">Git</a> on your terminal or VSCode.</li>
</ol>

<hr />

<h2 id="questions">Questions</h2>

<ol>
  <li>What is the role of Flash memory in an MCU?</li>
  <li>What is the primary difference in architecture between Arduino Uno and STM32?</li>
  <li>Which HAL function is used to introduce a delay in STM32?</li>
  <li>List two advantages of STM32 over Arduino.</li>
  <li>What is the purpose of <code class="language-text highlighter-rouge">MX_GPIO_Init()</code> in STM32 code?</li>
  <li>What is the difference between HAL and LL libraries?</li>
  <li>Which GPIO register sets pin mode (input/output)?</li>
  <li>How do you enable a GPIO clock in HAL?</li>
  <li>Whatâ€™s the purpose of the STM32 clock tree?</li>
  <li>Why use a pull-down resistor for a button?</li>
</ol>

<hr />

<h2 id="project-stm32-blinking-led">Project: STM32 blinking LED</h2>
<p><strong>Objective</strong>: Install STM32CubeIDE and program the STM32 to blink an LED.</p>

<h3 id="instructions">Instructions</h3>
<ol>
  <li><strong>Install Software</strong>:
    <ul>
      <li><a href="https://www.st.com/en/development-tools/stm32cubeide.html">STM32CubeIDE</a>.</li>
      <li><a href="https://www.st.com/en/development-tools/stm32cubemx.html">STM32CubeMX</a>.</li>
    </ul>
  </li>
  <li><strong>Create Project</strong>:
    <ul>
      <li>Launch STM32CubeIDE, click on <em>Start new STM32 project</em>.</li>
      <li>Select your STM32 model (e.g., STM32F103C8T6).</li>
    </ul>
  </li>
  <li><strong>Configure GPIO</strong>:
    <ul>
      <li>In <em>Pinout &amp; Configuration</em>, select a GPIO pin (e.g., PA5) â†’ Set to <em>GPIO_Output</em>.</li>
    </ul>
  </li>
  <li><strong>Generate Code</strong>:
    <ul>
      <li>Click <em>Generate Code</em> and open <code class="language-text highlighter-rouge">main.c</code> in the IDE.</li>
    </ul>
  </li>
  <li><strong>Write Code</strong>:
    <ul>
      <li>Write your code to toggle the LED pin as below:
        <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>  
<span class="n">HAL_GPIO_TogglePin</span><span class="p">(</span><span class="n">GPIOA</span><span class="p">,</span> <span class="n">GPIO_PIN_5</span><span class="p">);</span>  
<span class="n">HAL_Delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>  <span class="c1">// 500ms delay  </span>
<span class="p">}</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><strong>Build and Flash</strong>:
    <ul>
      <li>Connect the STM32 via ST-Link.</li>
      <li>Click <em>Run</em> to flash the program.</li>
    </ul>
  </li>
  <li><strong>GitHub Submission</strong>:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git init
git add <span class="nb">.</span>
git commit <span class="nt">-m</span> <span class="s2">"Week 1 project: LED Blink"</span>
git remote add origin &lt;your-repo-url&gt;
git push <span class="nt">-u</span> origin main
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="debugging">Debugging</h3>
<p><strong>Installation</strong>:</p>
<ul>
  <li>If drivers fail, install <a href="https://www.st.com/en/development-tools/stsw-link009.html">ST-Link drivers</a>.</li>
</ul>

<p><strong>Pin Configuration</strong>:</p>
<ul>
  <li>In CubeMX, navigate to <em>System Core</em> â†’ <em>GPIO</em> â†’ Select PA5 â†’ Set mode to <em>Output Push Pull</em>.</li>
</ul>

<p><strong>Clock Configuration</strong>:</p>
<ul>
  <li>Ensure the HSE (external oscillator) is enabled for accurate timing.</li>
</ul>

<p><strong>Code Generation</strong>:</p>
<ul>
  <li>After generating code, locate <code class="language-text highlighter-rouge">main.c</code> â†’ Add the LED toggle logic inside the <code class="language-text highlighter-rouge">while(1)</code> loop.</li>
</ul>

<p><strong>LED Not Blinking</strong>:</p>
<ul>
  <li>Check connections with a multimeter.</li>
  <li>Verify GPIO configuration in <code class="language-text highlighter-rouge">MX_GPIO_Init()</code>.</li>
  <li>Check if the correct pin (e.g., PA5) is toggled.</li>
  <li>Verify <code class="language-text highlighter-rouge">HAL_Delay</code> uses a configured timer (SysTick by default).</li>
  <li>Check <code class="language-text highlighter-rouge">SystemClock_Config()</code> in <code class="language-text highlighter-rouge">main.c</code> for correct clock source.</li>
</ul>

<p><strong>Compilation Errors</strong>:</p>
<ul>
  <li>Ensure the board is in programming mode (BOOT0 pin high).</li>
  <li>Ensure HAL drivers are included in the project.</li>
</ul>

<p><strong>ST-Link Connection Failed</strong>:</p>
<ul>
  <li>Reinstall drivers or try a different USB port.</li>
</ul>

<p><strong>Flashing Failed</strong>:</p>
<ul>
  <li>Reconnect ST-Link and restart the IDE.</li>
</ul>

<h2 id="dictionary">Dictionary</h2>

<ul>
  <li><strong>HAL (Hardware Abstraction Layer)</strong>: Library to abstract hardware operations for peripheral control (e.g., <code class="language-text highlighter-rouge">HAL_GPIO_TogglePin()</code>).</li>
  <li><strong>GPIO</strong>: General-Purpose Input/Output â€“ configurable digital pins.</li>
  <li><strong>RTOS (Real-Time Operating System)</strong>: Manages multiple tasks with timing guarantees (e.g., FreeRTOS).</li>
  <li><strong>Toolchain</strong>: Set of tools for code development (STM32CubeIDE, compiler, debugger).</li>
  <li><strong>Interrupt</strong>: Signal that pauses the CPU to handle an event.</li>
  <li><strong>CMSIS</strong>: Cortex Microcontroller Software Interface Standard.</li>
  <li><strong>Clock Tree</strong>: System of clock sources and multipliers.</li>
  <li><strong>DMA</strong>: Direct Memory Access (peripheral-to-memory transfers).</li>
  <li><strong>Clock Speed</strong>: Frequency at which the CPU executes instructions (e.g., 168MHz).</li>
</ul>

<h2 id="resources">Resources</h2>

<ol>
  <li><a href="https://www.youtube.com/watch?v=Hffw-m9fuxc">STM32CubeIDE Beginner Guide</a></li>
  <li><a href="https://www.reddit.com/r/stm32f4/comments/95406y/comment/e5ej2av/?utm_source=share&amp;utm_medium=web3x&amp;utm_name=web3xcss&amp;utm_term=1&amp;utm_content=share_button">STM32 HAL Documentation Guide</a></li>
  <li><a href="https://git-scm.com/docs/gittutorial">Git Tutorial</a></li>
  <li><a href="https://developer.arm.com/documentation/ddi0439/b/Introduction">ARM Cortex-M4 Manual</a></li>
  <li><a href="https://www.freertos.org/Documentation/01-FreeRTOS-quick-start/01-Beginners-guide/01-RTOS-fundamentals">FreeRTOS Beginner Guide</a></li>
</ol>

<h2 id="answers-to-questions">Answers to Questions</h2>

<ol>
  <li>Flash stores the compiled program code and read-only data.</li>
  <li>STM32 uses ARM Cortex-M cores with higher clock speeds and more peripherals.</li>
  <li><code class="language-text highlighter-rouge">HAL_Delay()</code></li>
  <li>Higher performance, more memory, advanced peripherals.</li>
  <li>Initializes GPIO pins based on CubeMX configuration.</li>
  <li>HAL abstracts hardware with high-level functions; LL provides direct register access for optimization.</li>
  <li><code class="language-text highlighter-rouge">GPIOx_MODER</code> (Mode Register).</li>
  <li><code class="language-text highlighter-rouge">__HAL_RCC_GPIOA_CLK_ENABLE()</code> for Port A.</li>
  <li>To configure clock sources (HSI/HSE) and distribute clocks to peripherals.</li>
  <li>To prevent floating input when the button is unpressed.</li>
</ol>

<hr />

<h2 id="credits">Credits</h2>

<!--Written by Jorge Porras (2025)-->
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1">
      <p>Deepseek.Â <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

</div>
</article>
  </main>

  <!-- _includes/footer.html -->
<footer class="site-footer">
  <div class="footer-content">
    <div class="social-links">
      <a href="https://github.com/yoon-zh" class="hover-glow" aria-label="GitHub">
        <i class="fab fa-github"></i>
      </a>
      <a href="mailto:yoon_zh@outlook.com" class="hover-glow" aria-label="Email">
        <i class="fas fa-envelope"></i>
      </a>
      <a href="https://www.linkedin.com/in/jorge-porras-1a7393282/" class="hover-glow" aria-label="LinkedIn">
        <i class="fab fa-linkedin"></i>
      </a>
      <a href="https://t.me/yo_o_n" class="hover-glow" aria-label="Telegram">
        <i class="fab fa-telegram-plane"></i>
      </a>
    </div>
    <div class="footer-bottom">
      <p>Â© 2025 ìœ¤å¿—. All rights reserved.</p>
    </div>
  </div>
</footer>
<script src="/scripts/main.js"></script>
<script src="/scripts/codeblocks.js"></script>
<script src="/scripts/axeptio.js"></script>
</body>
</html>